# filter_time.sh

## üìä –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ª–æ–≥–æ–≤ –ø–æ –≤—Ä–µ–º–µ–Ω–∏

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ –∏–∑ –ø–æ—Ç–æ–∫–∞ `stdin`, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ `JSON`-—Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª–µ–º `"T":"..."` (–≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –≤
—Ñ–æ—Ä–º–∞—Ç–µ `ISO 8601`), –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–Ω–æ–º—É –¥–∏–∞–ø–∞–∑–æ–Ω—É.

## üß∞ –û–ø–∏—Å–∞–Ω–∏–µ

–°–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª—è `"T"` —Å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–æ–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ `"T":"2025-06-09T00:06:55.355+0300"`.

–ó–∞—Ç–µ–º –æ–Ω —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—É—é –º–µ—Ç–∫—É (–¥–æ —Å–µ–∫—É–Ω–¥) —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ (`--start` –∏/–∏–ª–∏ `--end`) –∏ –≤—ã–≤–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–µ
—Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∑–∞–¥–∞–Ω–Ω—ã–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏.

–ï—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–µ —É–∫–∞–∑–∞–Ω ‚Äî –≤—ã–≤–æ–¥—è—Ç—Å—è –≤—Å–µ —Å—Ç—Ä–æ–∫–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–æ–ª–µ `"T"`.

## üì¶ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
cat logfile.log | ./filter_time.sh [OPTIONS]

./filter_time.sh [OPTIONS] < logfile.log
```

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø—Ü–∏–∏:

| –û–ü–¶–ò–Ø              | –û–ü–ò–°–ê–ù–ò–ï                                                           |
|--------------------|--------------------------------------------------------------------|
| `--start=DATETIME` | –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ —Å –º–æ–º–µ–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ–≥–æ `DATETIME` |
| `--end=DATETIME`   | –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ –¥–æ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏                   |

–ì–¥–µ `DATETIME` ‚Äî —Å—Ç—Ä–æ–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `YYYY-MM-DDTHH:MM:SS` (–±–µ–∑ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ –∏ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞)

## –ü—Ä–∏–º–µ—Ä—ã

```bash
# –û–±–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
cat logfile.log | ./filter_time.sh --start=2025-06-09T00:06:50 --end=2025-06-09T00:07:10

# –¢–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ
./filter_time.sh --start=2025-06-09T00:06:50 < logfile.log

# –¢–æ–ª—å–∫–æ –∫–æ–Ω–µ—Ü
./filter_time.sh --end=2025-06-09T00:07:10 < logfile.log

# –ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π ‚Äî –ø—Ä–æ—Å—Ç–æ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ –Ω–∞–ª–∏—á–∏—é –ø–æ–ª—è T
./filter_time.sh < logfile.log

cat /srv/logs/ucs_mt/kongur/kongur.log  | ./filter_time.sh --start=2025-06-10T13:03:00 --end=2025-06-10T13:05:00

cat /srv/logs/ucs_mt/kongur/kongur.log  | ./filter_time.sh --end=2025-06-10T13:05:00

cat /srv/logs/ucs_mt/kongur/kongur.log  | ./filter_time.sh --start=2025-06-10T13:03:00
```

## ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Bash
- gawk
- LC_ALL=C (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ —Å–∫—Ä–∏–ø—Ç–µ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã)
- 
## üõ†Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —á—Ç–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∏–∑ stdin.
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏–ª–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–æ–≤.
- –†–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –¥–∞–∂–µ –Ω–∞ –±–æ–ª—å—à–∏—Ö –ª–æ–≥–∞—Ö –±–ª–∞–≥–æ–¥–∞—Ä—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é gawk.